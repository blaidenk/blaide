<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stay Hot NBA Player Rankings</title>
    <link href="/css/quiz.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <link rel="icon" type="image/x-icon" href="/img/StayHotLogo.jpg">
</head>

<header>
    <img id="stayhotpic" src="/img/STAY HOT PODCAST-TW HEADER-YOUTUBE.jpg">
</header>

<body>

    <div id="stayhot">
        <h2>
            NBA Ranking Quiz
        </h2>
    </div>

    <ol type="1" id="results">
    </ol>
    <div id="buffer">
        <h2 id="bufferText"></h2>
        <h3 id="bufferTimer"></h3>
    </div>
    <ol type="1" id="consensus">
    </ol>
    <div id="progress">
        <div class="progress">

            <div id="completion" style="width: 0%;">PROGRESS...</div>

        </div>
    </div>

    <div id="wrapper">
        <div id="one" class="button" onclick="selected('one');">
            <div class="image"></div>
            <div class="text"></div>
        </div>
        <div id="two" class="button" onclick="selected('two');">
            <div class="image"></div>
            <div class="text"></div>
        </div>
    </div>

    <script>
        var names = ["Lebron James",
            "Steph Curry",
            "Giannis Antetokounmpo",
            "Kevin Durant",
            "Ja Morant",
            "Nikola Jokic",
            "Trae Young",
            "Devin Booker",
            "Chris Paul",
            "Joel Embiid",
            "James Harden",
            "Dame Lillard",
            "Luka Doncic",
            "Karl-Anthony Towns",
            "Jimmy Butler",
            "Jayson Tatum",
            "Demar DeRozan",
            "Zach Lavine",
            "Donovan Mitchell",
            "Rudy Gobert",
            "Darius Garland",
            "Anthony Davis",
            "Brandon Ingram",
            "Kawhi Leonard",
            "Paul George",
            "Zion Williamson",
            "Bradley Beal",
            "Kyrie Irving",
            "Jaylen Brown",
            "Shai Gilgeous-Alexander"
        ];

        function alph(number) {
            var baseChar = ("A").charCodeAt(0),
                letters = "";

            do {
                number -= 1;
                letters = String.fromCharCode(baseChar + (number % 26)) + letters;
                number = (number / 26) >> 0; // quick `floor`
            } while (number > 0);

            return letters;
        }

        function listReal(name, image, k) {
            this.name = name;
            this.image = image;
            this.k = k;
        }

        var iteration;
        var players;
        var list = [];

        for (let i = 0; i < names.length; i++) {
            if (names[i] == "Jaylen Brown" || names[i] == "Anthony Davis") {
                iteration = "02";
            } else {
                iteration = "01";
            }

            players = new listReal(names[i], "https://www.basketball-reference.com/req/202106291/images/players/" +
                (names[i].substring(names[i].indexOf(" ") + 1, names[i].indexOf(" ") + 6) +
                    names[i].substring(0, 2) + iteration + ".jpg").toLowerCase(), alph(i + 1).toLowerCase());
            list.push(players);
        }

        function consensus(countList) {
            let btn = document.createElement("button");
            btn.innerHTML = "Get Consensus Ranking";
            btn.onclick = function() {
                var dataString = "<li>";

                console.log(countList);
                setTimeout(function() {
                    const sorted = new Map([...countList.entries()].sort((a, b) => a[1] - b[1]));
                    sorted.forEach((value, key) => {
                        dataString += key + "</li><li>";
                    });
                    console.log(sorted);
                    document.getElementById("consensus").innerHTML = dataString.substring(0, dataString.length - 4);

                }, 500);
            };
            document.getElementById("buffer").appendChild(btn);
        }
    </script>

    <script src="/js/quiz.js"></script>

</body>

</html>
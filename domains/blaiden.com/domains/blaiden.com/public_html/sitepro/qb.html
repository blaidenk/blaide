<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stay Hot QB Rankings</title>
    <link href="/css/quiz.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <link rel="icon" type="image/x-icon" href="/img/StayHotLogo.jpg">
</head>

<header>
    <img id="stayhotpic" src="/img/STAY HOT PODCAST-TW HEADER-YOUTUBE.jpg">
</header>

<body>

    <div id="stayhot">
        <h2>
            QB Ranking Quiz
        </h2>
    </div>

    <ol type="1" id="results">
    </ol>
    <div id="buffer">
    </div>
    <ol type="1" id="consensus">
    </ol>
    <div id="progress">
        <div class="progress">

            <div id="completion" style="width: 0%;">PROGRESS...</div>

        </div>
    </div>

    <div id="wrapper">
        <div id="one" class="button" onclick="selected('one');">
            <div class="image"></div>
            <div class="text"></div>
        </div>
        <div id="two" class="button" onclick="selected('two');">
            <div class="image"></div>
            <div class="text"></div>
        </div>
    </div>

    <script>
        var names = ["Jacoby Brissett",
            "Lamar Jackson",
            "Kenny Pickett",
            "Joe Burrow",
            "Trevor Lawrence",
            "Ryan Tannehill",
            "Matt Ryan",
            "Davis Mills",
            "Josh Allen",
            "Zach Wilson",
            "Mac Jones",
            "Tua Tagovailoa",
            "Patrick Mahomes",
            "Justin Herbert",
            "Russell Wilson",
            "Derek Carr",
            "Aaron Rodgers",
            "Kirk Cousins",
            "Justin Fields",
            "Jared Goff",
            "Baker Mayfield",
            "Marcus Mariota",
            "Tom Brady",
            "Andy Dalton",
            "Dak Prescott",
            "Daniel Jones",
            "Taylor Heinicke",
            "Jalen Hurts",
            "Jimmy Garoppolo",
            "Geno Smith",
            "Matthew Stafford",
            "Kyler Murray"
        ];

        function alph(number) {
            var baseChar = ("A").charCodeAt(0),
                letters = "";

            do {
                number -= 1;
                letters = String.fromCharCode(baseChar + (number % 26)) + letters;
                number = (number / 26) >> 0; // quick `floor`
            } while (number > 0);

            return letters;
        }

        function listReal(name, image, k) {
            this.name = name;
            this.image = image;
            this.k = k;
        }

        var iteration;
        var players;
        var list = [];

        for (let i = 0; i < names.length; i++) {
            iteration = "00";
            year = "2022";

            if (names[i] == "Jimmy Garoppolo" ||
                names[i] == "Jameis Winston" ||
                names[i] == "Andy Dalton") year = "2021";
            else if (names[i] == "Dak Prescott" ||
                names[i] == "Marcus Mariota" ||
                names[i] == "Joe Burrow") iteration = "01";
            else if (names[i] == "Daniel Jones") {
                iteration = "05";
                year = "2020"
            } else if (names[i] == "Derek Carr" ||
                names[i] == "Josh Allen" ||
                names[i] == "Davis Mills") iteration = "02";
            else if (names[i] == "Mac Jones") iteration = "05";
            else if (names[i] == "Baker Mayfield") year = "2020";
            else {
                iteration = "00";
                year = "2022";
            }


            players = new listReal(names[i], "https://www.pro-football-reference.com/req/20180910/images/headshots/" +
                (names[i].substring(names[i].indexOf(" ") + 1, names[i].indexOf(" ") + 5) +
                    names[i].substring(0, 2) + iteration + "_" + year + ".jpg"), alph(i + 1));
            list.push(players);
        }

        function consensus(countList) {
            let btn = document.createElement("button");
            btn.innerHTML = "Get Consensus Ranking";
            btn.onclick = function() {
                var dataString = "<li>";

                console.log(countList);
                setTimeout(function() {
                    const sorted = new Map([...countList.entries()].sort((a, b) => a[1] - b[1]));
                    sorted.forEach((value, key) => {
                        dataString += key + "</li><li>";
                    });
                    console.log(sorted);
                    document.getElementById("consensus").innerHTML = dataString.substring(0, dataString.length - 4);

                }, 500);
            };
            document.getElementById("buffer").appendChild(btn);
        }
    </script>

    <script src="/js/quiz.js"></script>

</body>

</html>